import{r as l,T as w,ag as x}from"./index-8ijlVFhB.js";import{l as u,u as E,c as b,a as L,b as f,e as d,d as O,f as V,g as A,h as G,L as S,i as J,j,k as F,m as U,n as W,w as Z}from"./ActivityDetailsPage-BNQ6e-ny.js";import{M as _e,P as Ie,T as Ne}from"./ActivityDetailsPage-BNQ6e-ny.js";import"./useActivity-C_PbKQng.js";import"./useUser-SZO5KdnX.js";import"./index-ByiQdw6l.js";import"./useIsAuthenticated-DMut7WCv.js";import"./HubConnectionBuilder-D8z-PhPF.js";import"./AccessTime-CC7MfprS.js";function R(a,n,e){n.center!==e.center&&a.setLatLng(n.center),n.radius!=null&&n.radius!==e.radius&&a.setRadius(n.radius)}function z(a){return a.split(" ").filter(Boolean)}function D(a,n){for(const e of z(n))u.DomUtil.addClass(a,e)}function P(a,n,e){n.bounds instanceof u.LatLngBounds&&n.bounds!==e.bounds&&a.setBounds(n.bounds),n.opacity!=null&&n.opacity!==e.opacity&&a.setOpacity(n.opacity),n.zIndex!=null&&n.zIndex!==e.zIndex&&a.setZIndex(n.zIndex)}function T(){return E().map}function fe(a,n){const e=T();return l.useEffect(function(){return e.on(a,n),function(){e.off(a,n)}},[e,a,n]),e}function de(a){const n=T();return l.useEffect(function(){return n.on(a),function(){n.off(a)}},[n,a]),n}const ye=b(function(n){return new u.Control.Attribution(n)}),me=L(function({center:n,children:e,...t},o){const r=new u.Circle(n,t);return f(r,d(o,{overlayContainer:r}))},R),Ce=L(function({center:n,children:e,...t},o){const r=new u.CircleMarker(n,t);return f(r,d(o,{overlayContainer:r}))},R),Le=L(function({children:n,...e},t){const o=new u.FeatureGroup([],e);return f(o,d(t,{layerContainer:o,overlayContainer:o}))}),ve=L(function({data:n,...e},t){const o=new u.GeoJSON(n,e);return f(o,d(t,{overlayContainer:o}))},function(n,e,t){e.style!==t.style&&(e.style==null?n.resetStyle():n.setStyle(e.style))}),pe=O(function({bounds:n,url:e,...t},o){const r=new u.ImageOverlay(e,n,t);return f(r,d(o,{overlayContainer:r}))},function(n,e,t){if(P(n,e,t),e.bounds!==t.bounds){const o=e.bounds instanceof u.LatLngBounds?e.bounds:new u.LatLngBounds(e.bounds);n.setBounds(o)}e.url!==t.url&&n.setUrl(e.url)}),we=O(function({children:n,...e},t){const o=new u.LayerGroup([],e);return f(o,d(t,{layerContainer:o}))}),$=G(function({children:n,...e},t){const o=new u.Control.Layers(void 0,void 0,e);return f(o,d(t,{layersControl:o}))},function(n,e,t){e.collapsed!==t.collapsed&&(e.collapsed===!0?n.collapse():n.expand())}),q=A($),_=V(q);function I(a){return function(e){const t=E(),o=l.useRef(e),[r,c]=l.useState(null),{layersControl:i,map:s}=t,m=l.useCallback(C=>{i!=null&&(o.current.checked&&s.addLayer(C),a(i,C,o.current.name),c(C))},[a,i,s]),y=l.useCallback(C=>{i?.removeLayer(C),c(null)},[i]),g=l.useMemo(()=>d(t,{layerContainer:{addLayer:m,removeLayer:y}}),[t,m,y]);return l.useEffect(()=>{r!==null&&o.current!==e&&(e.checked===!0&&(o.current.checked==null||o.current.checked===!1)?s.addLayer(r):o.current.checked===!0&&(e.checked==null||e.checked===!1)&&s.removeLayer(r),o.current=e)}),e.children?w.createElement(S,{value:g},e.children):null}}_.BaseLayer=I(function(n,e,t){n.addBaseLayer(e,t)});_.Overlay=I(function(n,e,t){n.addOverlay(e,t)});function Y({bounds:a,boundsOptions:n,center:e,children:t,className:o,id:r,placeholder:c,style:i,whenReady:s,zoom:m,...y},g){const[C]=l.useState({className:o,id:r,style:i}),[v,N]=l.useState(null),h=l.useRef(void 0);l.useImperativeHandle(g,()=>v?.map??null,[v]);const B=l.useCallback(k=>{if(k!==null&&!h.current){const p=new u.Map(k,y);h.current=p,e!=null&&m!=null?p.setView(e,m):a!=null&&p.fitBounds(a,n),s!=null&&p.whenReady(s),N(J(p))}},[]);l.useEffect(()=>()=>{v?.map.remove()},[v]);const H=v?w.createElement(S,{value:v},t):c??null;return w.createElement("div",{...C,ref:B},H)}const ge=l.forwardRef(Y),K=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function M(a,n){const{[n]:e,...t}=a;return t}function Q(a,n,e){if(K.indexOf(a)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${a}`);if(e.map.getPane(a)!=null)throw new Error(`A pane with this name already exists: ${a}`);const t=n.pane??e.pane,o=t?e.map.getPane(t):void 0,r=e.map.createPane(a,o);if(n.className!=null&&D(r,n.className),n.style!=null)for(const c of Object.keys(n.style))r.style[c]=n.style[c];return r}function X(a,n){const[e]=l.useState(a.name),[t,o]=l.useState(null);l.useImperativeHandle(n,()=>t,[t]);const r=E(),c=l.useMemo(()=>({...r,pane:e}),[r]);return l.useEffect(()=>(o(Q(e,a,r)),function(){r.map.getPane(e)?.remove?.(),r.map._panes!=null&&(r.map._panes=M(r.map._panes,e),r.map._paneRenderers=M(r.map._paneRenderers,e))}),[]),a.children!=null&&t!=null?x.createPortal(w.createElement(S,{value:c},a.children),t):null}const Ee=l.forwardRef(X),be=L(function({positions:n,...e},t){const o=new u.Polygon(n,e);return f(o,d(t,{overlayContainer:o}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),Oe=L(function({positions:n,...e},t){const o=new u.Polyline(n,e);return f(o,d(t,{overlayContainer:o}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),Se=L(function({bounds:n,...e},t){const o=new u.Rectangle(n,e);return f(o,d(t,{overlayContainer:o}))},function(n,e,t){e.bounds!==t.bounds&&n.setBounds(e.bounds)}),Pe=b(function(n){return new u.Control.Scale(n)}),ee=G(function(n,e){const{attributes:t,bounds:o,...r}=n,c=document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.setAttribute("xmlns","http://www.w3.org/2000/svg"),t!=null)for(const s of Object.keys(t))c.setAttribute(s,t[s]);const i=new u.SVGOverlay(c,o,r);return f(i,e,c)},P),ne=j(ee);function te({children:a,...n},e){const{instance:t,container:o}=ne(n).current;return l.useImperativeHandle(e,()=>t),o==null||a==null?null:x.createPortal(a,o)}const he=l.forwardRef(te),ke=F(function(n,e){const t=new u.Tooltip(n,e.overlayContainer);return f(t,e)},function(n,e,{position:t},o){l.useEffect(function(){const c=e.overlayContainer;if(c==null)return;const{instance:i}=n,s=y=>{y.tooltip===i&&(t!=null&&i.setLatLng(t),i.update(),o(!0))},m=y=>{y.tooltip===i&&o(!1)};return c.on({tooltipopen:s,tooltipclose:m}),c.bindTooltip(i),function(){c.off({tooltipopen:s,tooltipclose:m}),c._map!=null&&c.unbindTooltip()}},[n,e,o,t])}),Me=O(function({bounds:n,url:e,...t},o){const r=new u.VideoOverlay(e,n,t);return t.play===!0&&r.getElement()?.play(),f(r,d(o,{overlayContainer:r}))},function(n,e,t){P(n,e,t),typeof e.url=="string"&&e.url!==t.url&&n.setUrl(e.url);const o=n.getElement();o!=null&&(e.play===!0&&!t.play?o.play():!e.play&&t.play===!0&&o.pause())}),xe=U(function({eventHandlers:n,params:e={},url:t,...o},r){const c=new u.TileLayer.WMS(t,{...e,...Z(o,r)});return f(c,r)},function(n,e,t){W(n,e,t),e.params!=null&&e.params!==t.params&&n.setParams(e.params)}),Ge=b(function(n){return new u.Control.Zoom(n)});export{ye as AttributionControl,me as Circle,Ce as CircleMarker,Le as FeatureGroup,ve as GeoJSON,pe as ImageOverlay,we as LayerGroup,_ as LayersControl,ge as MapContainer,_e as Marker,Ee as Pane,be as Polygon,Oe as Polyline,Ie as Popup,Se as Rectangle,he as SVGOverlay,Pe as ScaleControl,Ne as TileLayer,ke as Tooltip,Me as VideoOverlay,xe as WMSTileLayer,Ge as ZoomControl,T as useMap,fe as useMapEvent,de as useMapEvents};
